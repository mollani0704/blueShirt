<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.project.blueshirt.repository.review.ReviewRepository">
	
	<select id="getReviewList" resultType="com.project.blueshirt.model.review.Review">
		select
			code,
			review_title,
			category,
			review_content,
			create_date,
			update_date
		from
			review
	</select>
	
	<insert id="saveReview" parameterType="com.project.blueshirt.model.review.Review"
	useGeneratedKeys="true" keyProperty="code">
	
		insert into
			review
		values(
			0, 
			#{title},
			#{category},
			#{content},
			now(),
			now()
		)
	
	</insert>

	<insert id="saveReviewImgFiles" parameterType="com.project.blueshirt.model.review.ReviewImgFile">
	
		insert into
			review_img
		values
		<foreach collection="list" item="file" separator=",">
		(
			0, 
			#{file.review_code},
			#{file.file_name},
			now(),
			now()
		)
		</foreach>
	</insert>

</mapper>